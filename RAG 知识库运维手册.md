# RAG 知识库运维手册

## 简介
这是一份简单的操作指南，用于每日更新 Agora SDK 技术支持知识库，并同步到百炼平台供 AI 使用。

## 准备工作（首次使用）
1. 向管理员索要 GitHub 仓库权限
2. 克隆仓库到本地：
   ```bash
   git clone https://github.com/JamieLiu67/ticket_RAG.git
   cd ticket_RAG
   ```
3. 确保已安装并配置好 `ossutil`（联系管理员确认配置正确）

## 每日操作流程

### 步骤 1：添加新的知识内容

#### 1.1 添加工单知识（`工单训练 RAG 集.md`）
按照已有格式在文件末尾追加新内容：

```markdown
# ID: {新ID}

SDK Product: RTC

SDK Platform: Android

SDK Version: 4.6.2

Request Type: 集成问题

Request Description: {客户问题描述}

Reply: {回复内容}

---
```

**注意事项：**
- **ID 规则**：取自工单运营平台提供的工单编号，或知匣的知识点编号
- 严格按照现有格式，保留空行和 `---` 分隔符
- 可使用标准 Markdown 语法（链接、代码块等）

#### 1.2 添加已知问题（`CS_KI_RAG优化版.md`）
按照已有格式在文件开头追加新内容（最新问题放最前面）：

```markdown
# CS_KI_{ID} 
问题ID:{ID}  
问题描述: {详细描述}  
影响范围: {版本范围}  
影响平台: {平台}  
修复方案及进展: {解决方案}

---
```

**注意事项：**
- **ID 规则**：延续现有编号，查看文件中最新的 ID（如 0238），+1 即可（如 0239）
- 严格按照现有格式，保留空行和 `---` 分隔符
- 新问题添加到文件**最前面**（最新问题优先）

### 步骤 2：一键同步
在终端中进入项目目录，运行：
```bash
./sync.sh
```

脚本会自动完成：
1. 检测文件变更（支持同时检测工单文件和 CS_KI 文件）
2. **智能生成 commit message**：
   - 工单文件：自动提取"上次提交日期到今天"的日期范围
   - CS_KI 文件：自动提取新增的 ID 范围（如：239-240）
   - 合并格式：`新增 2026.2.27 19:00 到 2026.2.28 19:00 的工单对答记录；新增 CSKI 239-240`
3. 询问是否确认（直接按回车确认，或输入自定义内容）
4. **并行推送**到 GitHub 和阿里云 OSS
5. 显示同步结果

**关于日期范围和 ID 范围：**
- 脚本自动计算"上次提交"到"今天"的日期范围
- 如果中间有几天（周末/节假日）没更新，生成的日期范围会自然包含这几天
- CS_KI ID 范围通过比较当前文件和上次提交自动识别新增的 ID

### 步骤 3：验证同步
同步成功后：
- **GitHub 备份**：访问 https://github.com/JamieLiu67/ticket_RAG 查看最新提交
- **百炼平台**：约 1-2 分钟后 OSS 会自动同步到百炼平台

## 联系支持
如果使用过程中遇到任何问题，欢迎直接联系我：

**刘世沁**  
邮箱：liushiqin@shengwang.cn
